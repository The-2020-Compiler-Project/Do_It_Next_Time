### 6月29日

* 借鉴了网上的资料，今天基本确定了c语言的文法

* 初步决定实现的功能为定义主函数，声明单个变量和数组变量，实现赋值语句和判断语句

* 决定用递归下降子程序来做语法分析

* 符号表根据上课时用过的符号表稍作修改，因为目前没有考虑调用函数，没有用到函数表

  --------------------------------------------------

### 7月1日

* 设计了想要实现功能的语义动作，填写符号表

  -------------------------------------------

### 7月2日

- 上午完成了主函数定义，变量声明（包括数组），通过四则运算进行赋值功能的语法分析函数的编写

- 语义动作方面，在主函数定义和变量声明时填写符号表的操作写好了，但是四则运算的赋值还没有想好怎么通过运算顺序赋值并填写符号表

  -------------------------------------

### 7月3日

- 上午把语法分析的函数和语义动作整合在了一起，并且做好了和词法分析的对接。目前可以实现最基本的main函数声明和变量声明的分析，并能成功填写符号表。

- 基础工作基本已经完成，接下来再完善各个功能会相对容易。今天计划完成赋值语句的语义动作。

- 四则运算的赋值和四元式的生成有了初步的想法。

- 通过四则运算赋值的语法分析函数已经完善，可以进行编译，接下来会编写四则运算及赋值的四元式生成动作，完成这部分工作后会尝试生成目标指令

  -----------------------------

### 7月4日

- 经过3号一下午加一晚上的思考，我想了许多种四则运算的四元式生成方法，最后终于写好了！！！！！！！

  -----------------------

#### *在此记录我大概的思路*

- 我建立了一个四元式链表用来存放四元式序列；建立了四元式结构体的vector容器，作为栈；建立了char类型的vector容器，用来记录上一次运算的符号；建立了string类型的vector容器，用来存放上一次运算的数据

- 注：如x=a + b + c * d * e，则扫描到b * 时，上一次运算符号为+，上一次运算数据为a

- 以上述式子为例

  - 首先压栈四元式(= x ~ t)
  - 读a 和 + 时，新建四元式空间填写四元式 (+ a ~ t)，记录运算数据的vector容器新建空间记录标识符a（以下简称为记录数据），记录运算符号的vector容器新建空间记录运算符+（以下简称为记录符号）
  - 继续读下一个数据和运算符b +，运算符是+/-之一，那么填写四元式，(+ b ~ t)压栈，并记录数据b，记录符号+
  - 读下一个标识符和运算符c *，运算符为 * ，/，%之一 ，那么填写四元式(* c ~ t)压栈，并记录数据c，记录符号*
  - 读下一标识符和运算符d * 此时发现上一运算符为*，那么直接填写栈顶四元式 ( * c d t)，记录数据t，记录符号*，将栈顶四元式弹出，并填写四元式( * t ~ t‘ )
  - 读下一标识符和运算符e，结束，填写栈顶四元式(* t e t')，记录数据t'， 将栈顶四元式弹出，填写栈顶四元式(+ b t’ t'')，将栈顶四元式弹出，填写栈顶四元式(+ a t'' t''')，弹出的四元式按顺序存进链表中
  - 最终填写四元式(= x ~ t''')
  - 在此过程中如果遇到括号中的式子只需将其经过上述操作后单独存为中间变量t用于运算

  ------------------------------

## 总结

- 至此，我们组已经初步完成了词法分析，语法分析的赋值功能（包含一些更简单的语句），语义分析填写符号表和生成四则运算四元式的工作，下一步打算在完善代码和添加功能的同时着手目标代码的生成，并开始学习可视化界面的操作。

### 7月4日晚

- 昨晚的思路总体上是可行的，并且有了正确的输出。但是今天在测试多个数据时发现了问题，加减法的四元式生成语义动作不知道该放在哪个位置，导致了我浪费了接近两个小时的时间。回头去看昨天的思路发现这个部分思路确实不够清晰，在此详细记录一下，E’→ω1TE'|ε（加法产生式），当读到' ) '或者' ; '后，E'函数返回1，即E'读ε，E'接收到E‘的返回值后进行栈顶四元式的填写并弹栈，并返回1，递归调用即可完成四元式的填写。
- 至于今天之所以两个小时都没找出来这个问题，我归结为函数调用返回值使用方面的不熟练，现在想来这个问题并不值两个小时。然而总之算是写好了四则运算四元式的生成。接下来真的可以尝试生成目标代码了！！
- 明天计划完成函数声明和变量声明的四元式的编写，if语句语法语义分析函数及其四元式的编写，并初步尝试生成目标代码。

### 7月5日晚+6日半夜

- 完成if语句的语法和语义分析，可以实现if和else语句的嵌套调用，但生成目标代码时可能只支持一层  
- 判断条件目前只支持一个条件且仅限于两个整形和常数进行运算的表达式之间的比较  
- If语句的四元式已经完成，所有四元式的活跃信息尚未填写
- 今天要记录的不多，实现的还算顺利，唯一不足的是在分析if语句的条件，例如(a<b)时，b之后扫描到)，此时程序会误以为是四则运算结束了，便自动生成四元式，所以我在原来的基础上加上读到)和;后，前一个运算符不能为< >等，最终实现了if语句部分的语法分析，语义动作和四元式生成

### 7月6日晚

- 今天完成的工作不多，只把算术表达式的四元式优化做了，简化了赋值语句和中间变量的调用，活跃信息还没有考虑填写
- 明天计划完成活跃信息的填写，基本块的划分和目标代码的生成，目标代码可能暂时只能生成操作，没法生成可执行的汇编指令，如果明天能完成以上工作，有时间会尝试着写一写

### 7月7日晚

- 正在编写四元式直接生成目标代码的部分，直接尝试生成可运行的汇编指令
- 完成了活跃信息的填写，但仅限于一条赋值语句
- 划分了基本块

### 7月8日晚

- 已完成目标指令部分的编写，可实现判断语句目标指令的嵌套，寄存器分配上还存在一些小问题，今天试着跑了一下生成的目标代码，可以运行，但是CMP指令的操作数有一点问题，明天改正
- 明天在解决目标代码存在的问题的基础上，尝试着完成while循环语句的四元式生成和目标代码的实现